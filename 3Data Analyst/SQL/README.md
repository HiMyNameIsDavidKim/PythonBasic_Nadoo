# SQL
* Structured Query Language, DB에서 CRUD 기능을 하기 위해 정의한 표준 언어.

## `[Data Modeling]`

### [데이터 모델링의 유의점]
* Duplication : 중복(되면 안돼), 데이터 모델은 같은 데이터를 사용하는 사람, 시간, 장소를 파악하는데 도움을 준다.
* Inflexibility : 비유연(하면 안돼), 데이터 정의를 데이터 사용과 분리한다. 사소한 업무변화에 데이터 모델이 수시로 변경되면 안된다.
* Inconsistency : 비일관(하면 안돼), 데이터 간 상호 연관 관계에 대해 명확히 정의해야 한다.<br><br>ㅇ

### [데이터 모델링의 종류]
* 개념적(Conceptual) 데이터 모델링 : 핵심 엔터티와 그 사이의 관계 발견. 엔터티-관계 다이어그램을 생성하는 것.
* 논리적(Logical) 데이터 모델링 : 비즈니스 정보의 논리적 구조와 규칙을 명확히 표현하는 기법 또는 과정.
* 물리적(Physical) 데이터 모델링 : 데이터가 물리적으로 컴퓨터에 어떻게 저장될 것인가에 대한 정의.<br><br>

### [데이터 독립성]
* 외부 스키마 : 사용자가 보는 개인적 DB
* 개념 스키마 : 모든 사용자 관점을 통합한 전체 DB
* 내부 스키마 : DB가 물리적으로 저장된 형식
* 논리적 독립성 : 개념 스키마 변경이 외부 스키마에 영향을 주지 않는다.
* 물리적 독립성 : 내부 스키마 변경이 외부/개념 스키마에 영향을 주지 않는다.<br><br>

### [Mapping(사상)]
* 상호 독립적인 개념을 연결시켜주는 다리.
* 논리적 매핑 : 외부 스키마 - 개념 스키마
* 물리적 매핑 : 개념 스키마 - 내부 스키마<br><br>

### [데이터 모델링의 특징]
* 3요소 : Things(어떤 것), Attributes(성격), Relationships(관계)
* 현실세계 -> 추상화, 단순화, 정확화 -> 데이터 모델
* ERD 작업순서
    * 1.엔터티 그림 2.엔터티 배치 3.엔터티 관계 설정 4.관계명 기술 5.관계의 참여도 기술 6.관계 필수여부 기술
* <img width="296" alt="스크린샷 2022-10-23 오후 4 30 34" src="https://user-images.githubusercontent.com/112922638/197379889-0867dd82-cd06-49ed-a50e-91374577f4c8.png"> <br><br>

### [좋은 데이터 모델의 요소]
* Compeleteness : 완전성, 업무에 필요한 모든 데이터가 모델에 정의되야 한다.
* None-Redundancy : 중복 배제, 하나의 DB내에 동일한 사실은 한번만 존재한다.
* Business Rules : 업무 규칙, 많은 규칙을 사용자가 공유하도록 제공한다.
* Data Reusability : 데이터 재사용, 데이터가 독립적으로 설계되야 한다.
* Communication : 의사소통, 업무규칙은 엔터티, 서브타입, 속성, 관계 등의 형태로 최대한 자세하게 표현한다.
* Integration : 통합성, 동일한 데이터는 한번만 정의한다.<br><br>



## `[Entity]`
* 업무에 필요하고 유용한 정보를 저장하고 관리하기 위한 집합적인 것.
* 보이지 않는 모든 개념을 포함한다.
* <img width="285" alt="스크린샷 2022-10-23 오후 4 40 51" src="https://user-images.githubusercontent.com/112922638/197380336-9f600ec1-96a1-4069-baee-b22162f73a7e.png"> <br><br>

### [엔터티의 특징]
* 반드시 해당 업무에서 필요하고 관리하고자 하는 것.
* 유일한 식별자(Identifier)에 의해 식별 가능.
* 두 개 이상의 인스턴스의 집합.
* 업무 프로세스에 의해 이용되어야 한다.
* 반드시 속성(Attributes)이 있어야 한다.
* 다른 엔터티와 최소 1개 이상의 관계(Relationships)가 있어야 한다.<br><br>

### [엔터티의 분류]
* 유무형에 따른 분류 : 유형(물리적 형태), 개념(개념적 정보), 사건(업무수행시 발생)
* 발생시점에 따른 분류 : 기본(본래 존재하는 엔터티), 중심(기본 엔터티에서 발생한 엔터티), 행위(2개 이상의 부모 엔터티로 부터 발생, 자주 바뀌거나 양이 증가하는 엔터티)<br><br>



## `[Elements of Data Modeling]`
### [Attributes(속성)]
* 의미상 분리되지 않는 최소의 데이터 단위.
* 업무에서 필요로 하는 인스턴스로 관리하고자 하는 것.
    * 한 개의 엔터티는 2개 이상의 인스턴스 집합이다.
    * 한 개의 엔터티는 2개 이상의 속성을 가진다.
    * 한 개의 속성은 1개의 속성값을 가진다.
* 분류 : 기본 설계 파생 3가지로 나뉜다.
    * 기본 : 업무에서 추출한 모든 일반 속성
    * 설계 : 업무를 규칙화하기 위해 새로 만들거나 변형, 정의하는 속성
    * 파생 : 다른 속성에 영향을 받아 발생하는 속성
* Domain(도메인) : 각 속성이 가질 수 있는 값의 범위.
* 명명 : 업무에 밀접한 워딩, 서술하지 않고, 약어를 쓰지 않고 유일한 명칭 사용<br><br>

### [Relationships(관계)]
* 엔터티의 인스턴스 사이의 논리적인 연관성.
* 행위로 서로에게 연관성이 부여된 상태.
* 페어링 : 엔터티 안에 인스턴스가 개별적으로 관계를 가지는 것.
* UML에서의 관계 : 연관관계(=실선)(항상 이용하는 관계), 의존관계(=점선)(상대 행위에 의해 발생하는 관계)<br><br>

### [Identifier(식별자)]
* 엔터티 내에서 인스턴스를 구분하는 구분자.
* 식별자는 논리적 모델링 관점이고, 키는 물리적 모델링 관점이다. (식별자가 더 큰 개념)
* 특징
    * 유일성 : 주식별자에 의해 모든 인스턴스들이 유일하게 구분된다.
    * 최소성 : 주식별자를 구성하는 속성의 수는 최소의 수가 되어야 한다.
    * 불변성 : 지정된 주식별자의 값은 자주 변하지 않는다.
    * 존재성 : 주식별자가 지정되면 반드시 값이 들어와야 한다.
* 분류
    * 대표성 여부 : 주식별자(대표성O 참조관계 연결O), 보조식별자(대표성X 참조관계 연결X)
    * 독립 생성 여부 : 내부식별자(스스로 생성됨), 외부식별자(타 엔터티로부터 받아옴)
    * 속성의 개수 : 단일식별자(하나의 속성),  복합식별자(2개 이상의 속성)
    * 대체 여부 : 본질식별자(업무에 의해 만들어짐), 인조식별자(인위적으로 만들어짐)<br><br>



## `[데이터 모델과 성능]`
### [성능 데이터 모델링]
* DB 성능향상을 목적으로 설계단계의 데이터 모델링 때부터 여러 기능 반영.
    * (ex. 정규화, 반정규화, 테이블 통합, 테이블 분할, 조인 구조, PK, FK 등)
* 분석 및 설계 단계에서 성능을 고려하면 재업무 비용을 최소화할 수 있다.
* 데이터의 증가가 빠를수록 성능저하에 따른 성능개선 비용은 기하급수적으로 증가한다.
* 고려사항 순서
    * 1.Normalization(정규화)를 정확하게 수행한다.
    * 2.DB 용량을 산정한다.
    * 3.DB에 발생되는 트랜잭션의 유형을 파악한다.
    * 4.용량과 트랜잭션의 유형에 따라 Denormalization(반정규화) 수행.
    * 5.이력모델의 조정, PK/FK조정, 슈퍼타입/서브타입 조정.
    * 6.성능 관점에서 데이터 모델을 검증한다.<br><br>

### [Normalization]
* 반복적인 데이터를 분리하고 각 데이터가 종속된 테이블에 적절하게 배치되도록 하는 작업.
* 진행할수록 컬럼 수가 줄어들고 테이블 수가 늘어난다.
* 1차 정규화 : 모든 속성은 반드시 하나의 값을 가진다.
    * 같은 성격, 내용 컬럼이 연속될 때 컬럼 제거. 테이블 생성.
* 2차 정규화 : 1개의 테이블에는 1개의 PK만 있다.
    * PK가 복합키 구성일 때, 부분적 함수 종속 관계 테이블 분리.
* 3차 정규화 : PK가 아닌 모든 속성은 서로 종속될 수 없다.
    * PK가 아닌 일반 컬럼에 의존하는 컬럼 분리.<br><br>

### [Denormalization]
* 정규화된 모델에 대하여 시스템의 성능향상과 단순화를 위해 하는 작업.
* 진행할수록 컬럼 수가 늘어나고 테이블 수가 줄어든다.
* 정규화 시 (입력, 수정, 삭제) 성능이 향상되고, 반정규화 시 (조인) 성능이 향상된다.
* 반정규화의 절차
    * 반정규화 대상조사(범위처리 빈도수, 범위, 통계성)
        * ㅇㅁㅇ
        * ㅎㅁㅎ
        * ㅇㅅㅇ
* 반정규화 적용
    * ㅇㅁㅇ
    * ㅎㅁㅎ
    * ㅇㅅㅇ<br><br>



## `[SQL 기본]`
* 관계형 DB에서 데이터 정의, 조작, 제어를 위해 사용하는 언어.
* 작성 순서 : SELECT - FROM - WHERE - GROUP BY - HAVING - ORDER BY
* 실행 순서 : FROM - WHERE - GROUP BY - HAVING - SELECT - ORDER BY
* 연산 순서 : NOT - AND - OR<br><br>

### [SQL 언어 종류]
* DML(Data Manipulation) : 데이터 조작. (등록 검색 수정 삭제)
    * INSERT(등록) : 테이블에 새로운 데이터를 삽입함.
    * SELECT(검색) : 테이블에서 특정 컬럼을 가져옴.
        * SELECT DISTINCT : 테이블에서 특정 컬럼을 중복제거 후 가져옴.
    * UPDATE(수정) : 테이블에 특정 컬럼의 값을 수정함. (VALUES랑 같이 써야함.)
    * DELETE(삭제) : 테이블에 특정 (데이터만) 삭제함.
* DDL(Data Definition) : 데이터 정의. (생성 삭제 변경 초기화)
    * CREATE(정의) : 새로운 테이블 생성.
    * ALTER(변경) : 테이블 or 컬럼의 이름 및 속성 변경/추가/삭제.
        * RENAME : 이름 변경.
        * MODIFY : 속성 변경, 제약조건 추가.
        * ADD : 추가.
    * DROP(삭제) : (스키마&데이터&구조) 모두 완전 삭제.
    * RENAME(이름 변경)
    * TRUNCATE(초기화) : (데이터&구조) 삭제.
* DCL(Data Control) : 데이터 제어 및 권한 관리. (부여 박탈)
    * GRANT(부여)
    * REVOKE(박탈)
    * COMMIT(트랜잭션 작업 결과 반영)
    * ROLLBACK(트랜잭션 작업 취소)
* TCL(Transaction Control) : 데이터 트랜잭션 제어.
    * COMMIT(트랜잭션 작업 결과 반영)
    * ROLLBACK(트랜잭션 작업 취소)(지울 경우 DELETE만 복구 가능)
* 그 외
    * WHERE : 조건식. if와 유사함. 특정 컬럼의 값이 조건에 만족할때만 SELECT실행. (여기서 in이 나오면 or 조건이다.)
    * IS NULL : 빈값. NULL에 연산 시 NULL 리턴함. (반대. IS NOT NULL)
    * NVL(x,y) : NULL이면 y, NULL이 아니면 x
    * NVL2(x,y,z) : x가 NULL이면 z, x가 NULL이 아니면 y
    * NULLIF(x,y) : x=y이면 NULL, 다르면 x
    * COALESCE(x,y,...) : NULL이 아닌 첫번째 값.
    * LIKE : 특정 글자가 포함된 값을 보고 싶을 때 사용.
    * ORDER BY : 정렬 순서 지정. 항상 마지막에 실행된다.(ASC:오름차순,1,2,3 / DESC:내림차순,3,2,1)
    * count(컬럼명) : null 제외한 행 수 카운트. (count(*)은 전체 행 카운트)
    * ON : 조인 시에 조건을 지정.(ex.기준 컬럼)
    * ROUND : 반올림
    * 집계함수(SUM, AVG)는 NULL 무시하고 실행 가능.<br><br>

### [DDL의 특징]
* 데이터 유형
    * number : 숫자형
    * date : 날짜형
    * varchar2 : 가변길이 문자열
    * char : 고정된 길이 문자열
* 제약조건(CONSTRAINT) : 컬럼 크리에이트 시 뒤에 적어서 제약을 걸어줌.
    * default : 기본값 지정 가능
    * not null : null 입력 시 에러
    * primary key : 기본키 지정 (유니크 + not null)
    * forigner key : 외래키 지정<br><br>

### [트랜잭션]
* 거래라는 뜻으로, DB 처리 작업이 모두 완료 or 모두 취소 되게 하는 작업.
* 명령어는 COMMIT과 ROLLBACK 두개가 있다.
* 트랜잭션의 특징
    * Atomicity : 원자성, 반드시 DB에 모두 반영되던지 전혀 반영되지 않는다.
    * Consistency : 일관성, 작업 처리 결과가 항상 일관성 있다.
    * Isolation : 독립성, 서로 다른 트랜잭션에 끼어들 수 없다.
    * Durability : 지속성, 완료 후에는 영구적으로 반영된다.<br><br>

### [그룹 함수]
* ROLL UP : 1행 추가해서 특정 값을 연산한 값 출력. 정렬도 진행.
    * SUB TOTAL만 추가하는 것.
    * (ex. 001, NULL, 40000)
* CUBE : 연산이 가능한 모든 경우 다 추가함.
    * SUB TOTAL, GRAND TOTAL 모두 추가하는 것.
* GROUPING SETS : CUBE에서 인자를 다 지우고 SUB TOTAL, GRAND TOTAL만 유지.<br><br>



## `[DB Program]`
* 오라클 : 오라클에서 개발한 프로그램. 안정성이 높다. 비싸다.
* MySQL : 경량 DB 프로그램. 가볍고 종류가 다양하다. 표준 SQL이다.<br><br>



## `[용어]`
* query : DB에 코드와 키를 기반으로 정보를 요청하는 행위.
* entity : SQL에서의 객체. 정보를 저장하고 관리하기 위한 집합체.
    * 엔터티가 클래스랑 다른 점은 메서드가 없고 데이터만 있다.
    * 엑셀에 대입해서 이해한다면, 엔터티 = (헤드 + 로우), 인스턴스 = 로우, 속성 = 셀
* schema : 계획이나 도식. 자료를 저장하는 구조와 표현법.
* PK/FK : Primary Key, 주식별자 키 / Foreign Key, 외부식별자 키.
* DB : 필요에 의해 데이터를 일정한 형태로 저장해 놓은 것.
* DBMS : 효율적인 데이터 관리, 데이터 손상 시 데이터 복구에 필요한 SW.
* 테이블 : DB의 기본 단위. 데이터를 저장하는 객체.
* 기본키 : 테이블에 존재하는 각 행을 한가지로 특정할 수 있는 컬럼.
* 외부키 : 다른 테이블의 기본키로 사용되는 키, 관계를 연결하는 컬럼.
* 조인 : DB에서 테이블간의 결함. (결과 테이블 작성)
    * 이너 조인 : 두 테이블의 공통된 요소(행)만 프린트
    * 레프트 아우터 조인 : 이너 조인 + 왼쪽 기준 누락 데이터 
    * 라이트 아우터 조인 : 이너 조인 + 오른쪽 기준 누락 데이터
    * 풀 아우터 조인 : 이너 조인 + 레프트 아우터 조인 + 라이트 아우터 조인
    * 크로스 조인 : 특정 기준 없이, 모든 경우의 수에 대한 결합(데이터가 같을때 가 아니라 경우의 수 전체를 프린트함.)
    * 셀프 조인 : 자기 스스로를 결합시킴. (내 데이터만 이용해서 새 테이블을 생성함)<br><br>